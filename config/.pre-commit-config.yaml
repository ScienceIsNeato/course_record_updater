# LoopCloser - Pre-commit Configuration
# Uses ship_it.py for consistent quality checks between local and CI

repos:
  # Use our centralized quality gate script for commit validation (fail-fast always enabled)
  - repo: local
    hooks:
      - id: quality-gate
        name: Quality Gate (All Checks)
        entry: bash -c 'cd "$PWD" && source venv/bin/activate && source .envrc && python scripts/ship_it.py'
        language: system
        pass_filenames: false
        always_run: true

# Configuration
default_language_version:
  python: python3.11

default_stages: [pre-commit]

# Exclude patterns
exclude: |
  (?x)^(
    venv/.*|
    cursor-rules/.*|
    logs/.*|
    \.git/.*|
    \.pytest_cache/.*|
    __pycache__/.*|
    .*\.pyc
  )$