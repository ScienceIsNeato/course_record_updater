# SonarQube Configuration for Course Record Updater
# This configuration enables comprehensive code quality analysis

# Project Information
sonar.projectKey=course-record-updater
sonar.projectName=Course Record Updater
sonar.projectVersion=1.0
sonar.organization=scienceisneato

# Source Code Configuration
sonar.sources=.
sonar.language=py
sonar.sourceEncoding=UTF-8

# Exclusions - Files and directories to exclude from analysis
sonar.exclusions=\
    venv/**,\
    **/.venv/**,\
    **/node_modules/**,\
    **/__pycache__/**,\
    **/*.pyc,\
    cursor-rules/**,\
    htmlcov/**,\
    logs/**,\
    python-database/**,\
    flask_session/**,\
    static/images/**,\
    *.xlsx,\
    *.docx,\
    *.pdf,\
    *.mov,\
    *.csv,\
    *.sarif,\
    *.json

# Test Configuration
sonar.tests=tests
sonar.test.inclusions=tests/**/*.py
sonar.test.exclusions=tests/conftest.py

# Python-specific configuration
sonar.python.coverage.reportPaths=coverage.xml
sonar.python.xunit.reportPath=test-results.xml

# Code Quality Rules
# Enable detection of code smells, bugs, and security vulnerabilities
sonar.python.pylint.reportPaths=pylint-report.txt

# Quality Gate Configuration
# Set thresholds for various metrics
sonar.qualitygate.wait=true

# Duplication Configuration
# Detect code duplication more aggressively (match IDE plugin sensitivity)
sonar.cpd.python.minimumtokens=20
sonar.cpd.python.minimumlines=3

# Coverage Configuration
# Set coverage thresholds to match our 80% requirement
sonar.coverage.exclusions=\
    tests/**,\
    **/*_test.py,\
    **/test_*.py

# Security Configuration
# Enable security vulnerability detection including log injection
sonar.python.bandit.reportPaths=bandit-report.json
sonar.security.hotspots.inherit=NONE
sonar.security.review.rating=A

# Maintainability Configuration
# Enable detection of code smells and maintainability issues
sonar.python.flake8.reportPaths=flake8-report.txt

# Additional Analysis Parameters
# Enable more comprehensive analysis
sonar.python.version=3.13
sonar.python.file.suffixes=.py

# Security and Quality Rules Configuration
# Enable comprehensive rule detection to match IDE plugin
sonar.python.S5145.activate=true
sonar.python.S1192.activate=true
sonar.python.S6903.activate=true
sonar.python.S1135.activate=true
sonar.python.S1244.activate=true

# Quality Profile Configuration
# Use the most comprehensive quality profile available
sonar.profile.python=Sonar way

# Issue Detection Configuration - Be more restrictive to match IDE
sonar.issue.ignore.multicriteria=e1

# Only ignore TODO comments in planning documents
sonar.issue.ignore.multicriteria.e1.ruleKey=python:S1135
sonar.issue.ignore.multicriteria.e1.resourceKey=planning/**

# Analysis Configuration
# Enable all available analyzers
sonar.python.pylint=true
sonar.python.bandit=true
sonar.python.flake8=true

# Performance Configuration
# Optimize analysis performance
sonar.scm.disabled=false
sonar.scm.provider=git

# Reporting Configuration
# Generate detailed reports
sonar.verbose=false
sonar.log.level=INFO

